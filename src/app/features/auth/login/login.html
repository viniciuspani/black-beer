<!-- ========================================
     src/app/features/auth/login/login.component.html
     Template de Login
     ======================================== -->

<p-toast></p-toast>

<div class="login-container">
  <!-- Card de Login -->
  <p-card styleClass="login-card">
    
    <!-- Logo/Header -->
    <ng-template pTemplate="header">
      <div class="login-header">
        <div class="logo-container">
          <i class="pi pi-shield text-6xl text-amber-600"></i>
        </div>
        <h1 class="app-title">Black Beer</h1>
        <p class="app-subtitle">Gestão de Vendas de Cerveja Artesanal</p>
      </div>
    </ng-template>

    <!-- Formulário -->
    <ng-template pTemplate="content">
      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
        
        <!-- Campo: Email ou Username -->
        <div class="form-field">
          <label for="emailOrUsername" class="form-label">
            <i class="pi pi-user"></i>
            Email ou Usuário
          </label>
          <input 
            pInputText 
            id="emailOrUsername" 
            formControlName="emailOrUsername"
            placeholder="Digite seu email ou usuário"
            [class.ng-invalid]="hasError('emailOrUsername')"
            [class.ng-dirty]="hasError('emailOrUsername')"
            class="w-full" />
          
          @if (hasError('emailOrUsername')) {
            <small class="error-message">
              <i class="pi pi-exclamation-circle"></i>
              {{ getError('emailOrUsername') }}
            </small>
          }
        </div>

        <!-- Campo: Senha -->
        <div class="form-field">
          <label for="password" class="form-label">
            <i class="pi pi-lock"></i>
            Senha
          </label>
          <p-password 
            id="password"
            formControlName="password"
            placeholder="Digite sua senha"
            [feedback]="false"
            [toggleMask]="true"
            [class.ng-invalid]="hasError('password')"
            [class.ng-dirty]="hasError('password')"
            styleClass="w-full"
            inputStyleClass="w-full">
          </p-password>
          
          @if (hasError('password')) {
            <small class="error-message">
              <i class="pi pi-exclamation-circle"></i>
              {{ getError('password') }}
            </small>
          }
        </div>

        <!-- Lembrar-me -->
        <div class="form-field-checkbox">
          <p-checkbox 
            formControlName="rememberMe"
            [binary]="true"
            inputId="rememberMe"
            label="Lembrar-me">
            <span class="form-field-checkbox">Lembrar-me</span>           
          </p-checkbox>
        </div>

        <!-- Botão de Login -->
        <div class="form-actions">
          <p-button 
            type="submit"
            label="Entrar"
            icon="pi pi-sign-in"
            [loading]="isLoading()"
            [disabled]="loginForm.invalid"
            styleClass="w-full"
            severity="primary"
            [raised]="true">
          </p-button>
        </div>

        <!-- Divider -->
        <div class="divider">
          <span>ou</span>
        </div>

        <!-- Botão de Cadastro -->
        <div class="form-actions">
          <p-button 
            type="button"
            label="Criar Nova Conta"
            icon="pi pi-user-plus"
            (onClick)="goToRegister()"
            styleClass="w-full"
            severity="secondary"
            [outlined]="true">
          </p-button>
        </div>

      </form>
    </ng-template>

    <!-- Footer com info -->
    <ng-template pTemplate="footer">
      <div class="login-footer">
        <p class="footer-text">
          <i class="pi pi-info-circle"></i>
          Primeiro acesso? Use: <strong>admin@blackbeer.com</strong> / <strong>admin123</strong>
        </p>
      </div>
    </ng-template>

  </p-card>
</div>